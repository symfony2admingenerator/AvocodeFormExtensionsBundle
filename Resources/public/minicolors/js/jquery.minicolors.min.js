;(function(e){if(e)(function(e){function t(t,n){var r=e('<span class="minicolors" />'),i=e.minicolors.defaultSettings;if(t.data("minicolors-initialized"))return;n=e.extend(true,{},i,n);r.addClass("minicolors-theme-"+n.theme).addClass("minicolors-swatch-position-"+n.swatchPosition).toggleClass("minicolors-swatch-left",n.swatchPosition==="left").toggleClass("minicolors-with-opacity",n.opacity);if(n.position!==undefined){e.each(n.position.split(" "),function(){r.addClass("minicolors-position-"+this)})}t.addClass("minicolors-input").data("minicolors-initialized",true).data("minicolors-settings",n).prop("size",7).prop("maxlength",7).wrap(r).after('<span class="minicolors-panel minicolors-slider-'+n.control+'">'+'<span class="minicolors-slider">'+'<span class="minicolors-picker"></span>'+"</span>"+'<span class="minicolors-opacity-slider">'+'<span class="minicolors-picker"></span>'+"</span>"+'<span class="minicolors-grid">'+'<span class="minicolors-grid-inner"></span>'+'<span class="minicolors-picker"><span></span></span>'+"</span>"+"</span>");t.parent().find(".minicolors-panel").on("selectstart",function(){return false}).end();if(n.swatchPosition==="left"){t.before('<span class="minicolors-swatch"><span></span></span>')}else{t.after('<span class="minicolors-swatch"><span></span></span>')}if(!n.textfield)t.addClass("minicolors-hidden");if(n.inline)t.parent().addClass("minicolors-inline");a(t,false,true)}function n(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").prop("maxlength",null).removeClass("minicolors-input");t.before(e).remove()}function r(e){a(e)}function i(e){var t=e.parent(),n=t.find(".minicolors-panel"),r=e.data("minicolors-settings");if(!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus"))return;s();t.addClass("minicolors-focus");n.stop(true,true).fadeIn(r.showSpeed,function(){if(r.show)r.show.call(e.get(0))})}function s(){e(".minicolors-input").each(function(){var t=e(this),n=t.data("minicolors-settings"),r=t.parent();if(n.inline)return;r.find(".minicolors-panel").fadeOut(n.hideSpeed,function(){if(r.hasClass("minicolors-focus")){if(n.hide)n.hide.call(t.get(0))}r.removeClass("minicolors-focus")})})}function o(e,t,n){var r=e.parents(".minicolors").find(".minicolors-input"),i=r.data("minicolors-settings"),s=e.find("[class$=-picker]"),o=e.offset().left,a=e.offset().top,f=Math.round(t.pageX-o),l=Math.round(t.pageY-a),c=n?i.animationSpeed:0,h,p,d,v;if(t.originalEvent.changedTouches){f=t.originalEvent.changedTouches[0].pageX-o;l=t.originalEvent.changedTouches[0].pageY-a}if(f<0)f=0;if(l<0)l=0;if(f>e.width())f=e.width();if(l>e.height())l=e.height();if(e.parent().is(".minicolors-slider-wheel")&&s.parent().is(".minicolors-grid")){h=75-f;p=75-l;d=Math.sqrt(h*h+p*p);v=Math.atan2(p,h);if(v<0)v+=Math.PI*2;if(d>75){d=75;f=75-75*Math.cos(v);l=75-75*Math.sin(v)}f=Math.round(f);l=Math.round(l)}if(e.is(".minicolors-grid")){s.stop(true).animate({top:l+"px",left:f+"px"},c,i.animationEasing,function(){u(r,e)})}else{s.stop(true).animate({top:l+"px"},c,i.animationEasing,function(){u(r,e)})}}function u(e,t){function n(e,t){var n,r;if(!e.length||!t)return null;n=e.offset().left;r=e.offset().top;return{x:n-t.offset().left+e.outerWidth()/2,y:r-t.offset().top+e.outerHeight()/2}}var r,i,s,o,u,a,l,c,p=e.val(),v=e.attr("data-opacity"),m=e.parent(),y=e.data("minicolors-settings"),b=m.find(".minicolors-panel"),w=m.find(".minicolors-swatch"),E=m.find(".minicolors-grid"),S=m.find(".minicolors-slider"),x=m.find(".minicolors-opacity-slider"),T=E.find("[class$=-picker]"),N=S.find("[class$=-picker]"),C=x.find("[class$=-picker]"),k=n(T,E),L=n(N,S),A=n(C,x);if(t.is(".minicolors-grid, .minicolors-slider")){switch(y.control){case"wheel":u=E.width()/2-k.x;a=E.height()/2-k.y;l=Math.sqrt(u*u+a*a);c=Math.atan2(a,u);if(c<0)c+=Math.PI*2;if(l>75){l=75;k.x=69-75*Math.cos(c);k.y=69-75*Math.sin(c)}i=d(l/.75,0,100);r=d(c*180/Math.PI,0,360);s=d(100-Math.floor(L.y*(100/S.height())),0,100);p=g({h:r,s:i,b:s});S.css("backgroundColor",g({h:r,s:i,b:100}));break;case"saturation":r=d(parseInt(k.x*(360/E.width())),0,360);i=d(100-Math.floor(L.y*(100/S.height())),0,100);s=d(100-Math.floor(k.y*(100/E.height())),0,100);p=g({h:r,s:i,b:s});S.css("backgroundColor",g({h:r,s:100,b:s}));m.find(".minicolors-grid-inner").css("opacity",i/100);break;case"brightness":r=d(parseInt(k.x*(360/E.width())),0,360);i=d(100-Math.floor(k.y*(100/E.height())),0,100);s=d(100-Math.floor(L.y*(100/S.height())),0,100);p=g({h:r,s:i,b:s});S.css("backgroundColor",g({h:r,s:i,b:100}));m.find(".minicolors-grid-inner").css("opacity",1-s/100);break;default:r=d(360-parseInt(L.y*(360/S.height())),0,360);i=d(Math.floor(k.x*(100/E.width())),0,100);s=d(100-Math.floor(k.y*(100/E.height())),0,100);p=g({h:r,s:i,b:s});E.css("backgroundColor",g({h:r,s:100,b:100}));break}e.val(h(p,y.letterCase))}if(t.is(".minicolors-opacity-slider")){if(y.opacity){v=parseFloat(1-A.y/x.height()).toFixed(2)}else{v=1}if(y.opacity)e.attr("data-opacity",v)}w.find("SPAN").css({backgroundColor:p,opacity:v});f(e,p,v)}function a(e,t,n){var r,i,s,o,u,a,l,c=e.parent(),v=e.data("minicolors-settings"),m=c.find(".minicolors-swatch"),b=c.find(".minicolors-grid"),w=c.find(".minicolors-slider"),E=c.find(".minicolors-opacity-slider"),S=b.find("[class$=-picker]"),x=w.find("[class$=-picker]"),T=E.find("[class$=-picker]");r=h(p(e.val(),true),v.letterCase);if(!r)r=h(p(v.defaultValue,true));i=y(r);if(!t)e.val(r);if(v.opacity){s=e.attr("data-opacity")===""?1:d(parseFloat(e.attr("data-opacity")).toFixed(2),0,1);if(isNaN(s))s=1;e.attr("data-opacity",s);m.find("SPAN").css("opacity",s);u=d(E.height()-E.height()*s,0,E.height());T.css("top",u+"px")}m.find("SPAN").css("backgroundColor",r);switch(v.control){case"wheel":a=d(Math.ceil(i.s*.75),0,b.height()/2);l=i.h*Math.PI/180;o=d(75-Math.cos(l)*a,0,b.width());u=d(75-Math.sin(l)*a,0,b.height());S.css({top:u+"px",left:o+"px"});u=150-i.b/(100/b.height());if(r==="")u=0;x.css("top",u+"px");w.css("backgroundColor",g({h:i.h,s:i.s,b:100}));break;case"saturation":o=d(5*i.h/12,0,150);u=d(b.height()-Math.ceil(i.b/(100/b.height())),0,b.height());S.css({top:u+"px",left:o+"px"});u=d(w.height()-i.s*(w.height()/100),0,w.height());x.css("top",u+"px");w.css("backgroundColor",g({h:i.h,s:100,b:i.b}));c.find(".minicolors-grid-inner").css("opacity",i.s/100);break;case"brightness":o=d(5*i.h/12,0,150);u=d(b.height()-Math.ceil(i.s/(100/b.height())),0,b.height());S.css({top:u+"px",left:o+"px"});u=d(w.height()-i.b*(w.height()/100),0,w.height());x.css("top",u+"px");w.css("backgroundColor",g({h:i.h,s:i.s,b:100}));c.find(".minicolors-grid-inner").css("opacity",1-i.b/100);break;default:o=d(Math.ceil(i.s/(100/b.width())),0,b.width());u=d(b.height()-Math.ceil(i.b/(100/b.height())),0,b.height());S.css({top:u+"px",left:o+"px"});u=d(w.height()-i.h/(360/w.height()),0,w.height());x.css("top",u+"px");b.css("backgroundColor",g({h:i.h,s:100,b:100}));break}if(!n)f(e,r,s)}function f(e,t,n){var r=e.data("minicolors-settings");if(t+n!==e.data("minicolors-lastChange")){e.data("minicolors-lastChange",t+n);if(r.change){if(r.changeDelay){clearTimeout(e.data("minicolors-changeTimeout"));e.data("minicolors-changeTimeout",setTimeout(function(){r.change.call(e.get(0),t,n)},r.changeDelay))}else{r.change.call(e.get(0),t,n)}}}}function l(t){var n=p(e(t).val(),true),r=w(n),i=e(t).attr("data-opacity");if(!r)return null;if(i!==undefined)e.extend(r,{a:parseFloat(i)});return r}function c(t,n){var r=p(e(t).val(),true),i=w(r),s=e(t).attr("data-opacity");if(!i)return null;if(s===undefined)s=1;if(n){return"rgba("+i.r+", "+i.g+", "+i.b+", "+parseFloat(s)+")"}else{return"rgb("+i.r+", "+i.g+", "+i.b+")"}}function h(e,t){return t==="uppercase"?e.toUpperCase():e.toLowerCase()}function p(e,t){e=e.replace(/[^A-F0-9]/ig,"");if(e.length!==3&&e.length!==6)return"";if(e.length===3&&t){e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}return"#"+e}function d(e,t,n){if(e<t)e=t;if(e>n)e=n;return e}function v(e){var t={};var n=Math.round(e.h);var r=Math.round(e.s*255/100);var i=Math.round(e.b*255/100);if(r===0){t.r=t.g=t.b=i}else{var s=i;var o=(255-r)*i/255;var u=(s-o)*(n%60)/60;if(n===360)n=0;if(n<60){t.r=s;t.b=o;t.g=o+u}else if(n<120){t.g=s;t.b=o;t.r=s-u}else if(n<180){t.g=s;t.r=o;t.b=o+u}else if(n<240){t.b=s;t.r=o;t.g=s-u}else if(n<300){t.b=s;t.g=o;t.r=o+u}else if(n<360){t.r=s;t.g=o;t.b=s-u}else{t.r=0;t.g=0;t.b=0}}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function m(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];e.each(n,function(e,t){if(t.length===1)n[e]="0"+t});return"#"+n.join("")}function g(e){return m(v(e))}function y(e){var t=b(w(e));if(t.s===0)t.h=360;return t}function b(e){var t={h:0,s:0,b:0};var n=Math.min(e.r,e.g,e.b);var r=Math.max(e.r,e.g,e.b);var i=r-n;t.b=r;t.s=r!==0?255*i/r:0;if(t.s!==0){if(e.r===r){t.h=(e.g-e.b)/i}else if(e.g===r){t.h=2+(e.b-e.r)/i}else{t.h=4+(e.r-e.g)/i}}else{t.h=-1}t.h*=60;if(t.h<0){t.h+=360}t.s*=100/255;t.b*=100/255;return t}function w(e){e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}}e.minicolors={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:false,letterCase:"lowercase",opacity:false,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:true,theme:"default"}};e.extend(e.fn,{minicolors:function(o,u){switch(o){case"destroy":e(this).each(function(){n(e(this))});return e(this);case"hide":s();return e(this);case"opacity":if(u===undefined){return e(this).attr("data-opacity")}else{e(this).each(function(){r(e(this).attr("data-opacity",u))});return e(this)};case"rgbObject":return l(e(this),o==="rgbaObject");case"rgbString":case"rgbaString":return c(e(this),o==="rgbaString");case"settings":if(u===undefined){return e(this).data("minicolors-settings")}else{e(this).each(function(){var t=e(this).data("minicolors-settings")||{};n(e(this));e(this).minicolors(e.extend(true,t,u))});return e(this)};case"show":i(e(this).eq(0));return e(this);case"value":if(u===undefined){return e(this).val()}else{e(this).each(function(){r(e(this).val(u))});return e(this)};case"create":default:if(o!=="create")u=o;e(this).each(function(){t(e(this),u)});return e(this)}}});e(document).on("mousedown.minicolors touchstart.minicolors",function(t){if(!e(t.target).parents().add(t.target).hasClass("minicolors")){s()}}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var n=e(this);t.preventDefault();e(document).data("minicolors-target",n);o(n,t,true)}).on("mousemove.minicolors touchmove.minicolors",function(t){var n=e(document).data("minicolors-target");if(n)o(n,t)}).on("mouseup.minicolors touchend.minicolors",function(){e(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(t){t.preventDefault();var n=e(this).parent().find(".minicolors-input"),r=n.parent();if(r.hasClass("minicolors-focus")){s(n)}else{i(n)}}).on("focus.minicolors",".minicolors-input",function(t){var n=e(this);if(!n.data("minicolors-initialized"))return;i(n)}).on("blur.minicolors",".minicolors-input",function(t){var n=e(this),r=n.data("minicolors-settings");if(!n.data("minicolors-initialized"))return;n.val(p(n.val(),true));if(n.val()==="")n.val(p(r.defaultValue,true));n.val(h(n.val(),r.letterCase))}).on("keydown.minicolors",".minicolors-input",function(t){var n=e(this);if(!n.data("minicolors-initialized"))return;switch(t.keyCode){case 9:s();break;case 13:case 27:s();n.blur();break}}).on("keyup.minicolors",".minicolors-input",function(t){var n=e(this);if(!n.data("minicolors-initialized"))return;a(n,true)}).on("paste.minicolors",".minicolors-input",function(t){var n=e(this);if(!n.data("minicolors-initialized"))return;setTimeout(function(){a(n,true)},1)})})(e)})(jQuery);